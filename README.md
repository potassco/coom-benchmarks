# COOM Parser and Encoding

A parser to translate COOM DSL into ASP facts
plus a corresponding encoding.

## Installation
For the parser install ANTLR4 for python
```
pip install antlr4-tools
pip install antlr4-python3-runtime==4.9.3
```

The `model` directory contains is provided by denkbares and represents the current state of the COOM DSL language.
The specific version requirement stems from the fact that these files were created with ANTLR4 4.9.3.

More information on the ANTLR4 python target can be found here:
https://github.com/antlr/antlr4/blob/master/doc/python-target.md

## Usage
### Parser

To parse a `.coom` file run
```
python parse.py FILE.coom > OUTPUT.lp
```
Replace `FILE` and `OUTPUT` with the desired filenames.
The `parse.py` script itself just prints the ASP facts to the console.

If you get exception `Exception: Could not deserialize ATN with version  (expected 4).' check that you have the correct antlr4-python-runtime version installed (currently 4.9.3).

### Testing
To test the parser run (the Python `unittest` package needs to be installed)
```
python -m unittest tests/tests_parser.py
```

### Solving
The files generated by the parser are located in the `generated` directory.
There are two encodings with different levels of features.
The `encoding-kids.lp` contains all features of the kids bike.
To run
```
clingo encodings-kids.lp generated/kids-bike.lp
```

Similarly for the travel bike, run
```
clingo encoding-travel.lp generated/travel-bike.lp
```


## Documentation
For a documentation of the fact format see `FactFormat.md`.
